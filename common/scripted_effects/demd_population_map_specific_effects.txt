#############################################
# DEMD Population System
# by Vertimnus
# Must be overwritten by patch for other maps!
#############################################

demd_preprocess_map = { # 5 traditions
	title:c_rothenburg.holder = { get_title = title:b_freising } 
	culture:anglo_saxon = { # 4 traditions
		add_culture_tradition = tradition_stand_and_fight
		remove_variable = tradition_cooldown
	}
	culture:franconian = { 
		remove_culture_tradition = tradition_castle_keepers
		add_culture_tradition = tradition_ruling_caste
		add_culture_tradition = tradition_warrior_bishops 
		remove_variable = tradition_cooldown
	}
	culture:saxon = { # 4 traditions
		remove_culture_tradition = tradition_stand_and_fight
		add_culture_tradition = tradition_ottonian_reforms
		add_culture_tradition = tradition_warrior_bishops
	
		remove_variable = tradition_cooldown
	}	
	culture:bavarian = { # 5 traditions
		remove_culture_tradition = tradition_stand_and_fight
		add_culture_tradition = tradition_ottonian_reforms
		add_culture_tradition = tradition_warrior_bishops 
		remove_variable = tradition_cooldown
	}	
	culture:swabian = { # 4 traditions
		add_culture_tradition = tradition_warrior_bishops 
		remove_variable = tradition_cooldown
	}
	culture:cisalpine = { # 5 traditions
		add_culture_tradition = tradition_city_keepers
		add_culture_tradition = tradition_metal_craftsmanship
		remove_variable = tradition_cooldown
	}
	culture:italian = { # 5 traditions
		add_culture_tradition = tradition_city_keepers
		add_culture_tradition = tradition_legalistic
		remove_variable = tradition_cooldown
	}
	
	# Give it to everyone by default
	every_religion_global = {
		every_faith = { 
			add_doctrine = doctrine_slavery_faith
		}
	}
}

demd_postprocess_map = {
	
}

##############################################################

# For tightly linked culture + faiths where we don't want to spawn a culture member with the court owner's faith
demd_set_ancestral_faiths = {
	
}

##############################################################




##############################################################

demd_assign_special_resources = {

	# currently unused
	
}

#############################################################################
demd_set_up_trade_node_network = { 
   	## Origin Nodes
    add_to_global_variable_list = { name = trade_nodes target = title:k_xia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_pagan } 
    add_to_global_variable_list = { name = trade_nodes target = title:k_dzungaria }
    add_to_global_variable_list = { name = trade_nodes target = title:k_mongolia }


   	## TIBET TRADE
    add_to_global_variable_list = { name = trade_nodes target = title:k_gyalrong }
    add_to_global_variable_list = { name = trade_nodes target = title:k_amdo }
    add_to_global_variable_list = { name = trade_nodes target = title:k_kham }
    add_to_global_variable_list = { name = trade_nodes target = title:k_u }
    add_to_global_variable_list = { name = trade_nodes target = title:k_lhomon }
    add_to_global_variable_list = { name = trade_nodes target = title:k_tsang }
    add_to_global_variable_list = { name = trade_nodes target = title:k_guge } 

    ## INDIAN TRADE
    add_to_global_variable_list = { name = trade_nodes target = title:k_kamarupa }
    add_to_global_variable_list = { name = trade_nodes target = title:k_bengal }
    add_to_global_variable_list = { name = trade_nodes target = title:k_bihar }
    add_to_global_variable_list = { name = trade_nodes target = title:k_orissa }
    add_to_global_variable_list = { name = trade_nodes target = title:k_gondwana }
    add_to_global_variable_list = { name = trade_nodes target = title:k_kosala }
    add_to_global_variable_list = { name = trade_nodes target = title:k_himalaya }
    add_to_global_variable_list = { name = trade_nodes target = title:k_delhi }
    add_to_global_variable_list = { name = trade_nodes target = title:k_andhra }
    add_to_global_variable_list = { name = trade_nodes target = title:k_telingana }
    add_to_global_variable_list = { name = trade_nodes target = title:k_lanka }
    add_to_global_variable_list = { name = trade_nodes target = title:k_tamilakam }
    add_to_global_variable_list = { name = trade_nodes target = title:k_karnata }
    add_to_global_variable_list = { name = trade_nodes target = title:k_maharastra }
    add_to_global_variable_list = { name = trade_nodes target = title:k_malwa }
    add_to_global_variable_list = { name = trade_nodes target = title:k_gujarat }
    add_to_global_variable_list = { name = trade_nodes target = title:k_rajputana }

    ## MONGOLIAN/STEPPES
    add_to_global_variable_list = { name = trade_nodes target = title:k_tuva }
    add_to_global_variable_list = { name = trade_nodes target = title:k_buryatia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_angara }
    add_to_global_variable_list = { name = trade_nodes target = title:k_khakassia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_ob }
    add_to_global_variable_list = { name = trade_nodes target = title:k_sibir }
    add_to_global_variable_list = { name = trade_nodes target = title:k_kipchak }
    add_to_global_variable_list = { name = trade_nodes target = title:k_cuman }
    add_to_global_variable_list = { name = trade_nodes target = title:k_oghuz_il }
    add_to_global_variable_list = { name = trade_nodes target = title:k_kimek }
    add_to_global_variable_list = { name = trade_nodes target = title:k_bashkiria }
    add_to_global_variable_list = { name = trade_nodes target = title:k_yugra }
    add_to_global_variable_list = { name = trade_nodes target = title:k_permia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_volga_bulgaria }
    add_to_global_variable_list = { name = trade_nodes target = title:k_caspian_steppe }
    add_to_global_variable_list = { name = trade_nodes target = title:k_caucasus }

    ## RUSSIAN
    add_to_global_variable_list = { name = trade_nodes target = title:k_mordvinia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_opolye }
    add_to_global_variable_list = { name = trade_nodes target = title:k_pontic_steppe }
    add_to_global_variable_list = { name = trade_nodes target = title:k_ruthenia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_white_rus }
    add_to_global_variable_list = { name = trade_nodes target = title:k_bjarmaland }
    add_to_global_variable_list = { name = trade_nodes target = title:k_novgorod }

    ## SILK ROAD
    add_to_global_variable_list = { name = trade_nodes target = title:k_khotan }
    add_to_global_variable_list = { name = trade_nodes target = title:k_maryul }
    add_to_global_variable_list = { name = trade_nodes target = title:k_kashmir }
    add_to_global_variable_list = { name = trade_nodes target = title:k_punjab }
    add_to_global_variable_list = { name = trade_nodes target = title:k_sindh }
    add_to_global_variable_list = { name = trade_nodes target = title:k_zhetysu }
    add_to_global_variable_list = { name = trade_nodes target = title:k_syr_darya }
    add_to_global_variable_list = { name = trade_nodes target = title:k_transoxiana }
    add_to_global_variable_list = { name = trade_nodes target = title:k_kabulistan }
    add_to_global_variable_list = { name = trade_nodes target = title:k_makran }
    add_to_global_variable_list = { name = trade_nodes target = title:k_khorasan }
    add_to_global_variable_list = { name = trade_nodes target = title:k_makran }
    add_to_global_variable_list = { name = trade_nodes target = title:k_persia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_ajuraan }
    add_to_global_variable_list = { name = trade_nodes target = title:k_adal }
    add_to_global_variable_list = { name = trade_nodes target = title:k_yemen }
    add_to_global_variable_list = { name = trade_nodes target = title:k_arabia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_mesopotamia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_jazira }
    add_to_global_variable_list = { name = trade_nodes target = title:k_daylam }
    add_to_global_variable_list = { name = trade_nodes target = title:k_armenia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_georgia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_pontus }
    add_to_global_variable_list = { name = trade_nodes target = title:k_syria }

    ## EAST AFRICAN
    add_to_global_variable_list = { name = trade_nodes target = title:k_outer_ajuraan }
    add_to_global_variable_list = { name = trade_nodes target = title:k_damot }
    add_to_global_variable_list = { name = trade_nodes target = title:k_abyssinia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_blemmyia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_egypt }
    add_to_global_variable_list = { name = trade_nodes target = title:k_nubia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_alodia }

    ## AFRICAN
    add_to_global_variable_list = { name = trade_nodes target = title:k_darfur }
    add_to_global_variable_list = { name = trade_nodes target = title:k_sahara }
    add_to_global_variable_list = { name = trade_nodes target = title:k_africa }
    add_to_global_variable_list = { name = trade_nodes target = title:k_sao }
    add_to_global_variable_list = { name = trade_nodes target = title:k_kanem }
    add_to_global_variable_list = { name = trade_nodes target = title:k_hausaland }
    add_to_global_variable_list = { name = trade_nodes target = title:k_kwararafa }
    add_to_global_variable_list = { name = trade_nodes target = title:k_benin }
    add_to_global_variable_list = { name = trade_nodes target = title:k_igbo-benue } #Nri
    add_to_global_variable_list = { name = trade_nodes target = title:k_songhay }
    add_to_global_variable_list = { name = trade_nodes target = title:k_yorubaland }
    add_to_global_variable_list = { name = trade_nodes target = title:k_borgu }
    add_to_global_variable_list = { name = trade_nodes target = title:k_akan }
    add_to_global_variable_list = { name = trade_nodes target = title:k_gur }
    add_to_global_variable_list = { name = trade_nodes target = title:k_gurma }
    add_to_global_variable_list = { name = trade_nodes target = title:k_jenne }
    add_to_global_variable_list = { name = trade_nodes target = title:k_kong }
    add_to_global_variable_list = { name = trade_nodes target = title:k_adiukru }
    add_to_global_variable_list = { name = trade_nodes target = title:k_guinea }
    add_to_global_variable_list = { name = trade_nodes target = title:k_mali }
    add_to_global_variable_list = { name = trade_nodes target = title:k_kaabu }
    add_to_global_variable_list = { name = trade_nodes target = title:k_adiukru }
    add_to_global_variable_list = { name = trade_nodes target = title:k_takrur }
    add_to_global_variable_list = { name = trade_nodes target = title:k_ghana }
    add_to_global_variable_list = { name = trade_nodes target = title:k_anbiya }
    add_to_global_variable_list = { name = trade_nodes target = title:k_tahert }
    add_to_global_variable_list = { name = trade_nodes target = title:k_maghreb }

    ## EUROPEAN
    add_to_global_variable_list = { name = trade_nodes target = title:k_sicily }
    add_to_global_variable_list = { name = trade_nodes target = title:k_sardinia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_andalusia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_valencia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_badajoz }
    add_to_global_variable_list = { name = trade_nodes target = title:k_spanish_galicia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_asturias }
	
	### Fold Castille, Leon, and Navarra into Asturias
	title:d_castilla = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_asturias = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_asturias }
			
		}
	}
	title:d_cantabria = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_asturias = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_asturias }
			
		}
	}
	title:d_leon = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_asturias = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_asturias }
		}
	}
	title:d_asturias = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_asturias = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_asturias }
		}
	}
	title:d_viscaya = { # Navarra
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_asturias = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_asturias }
		}
	}
	title:d_navarra = { # Navarra
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_asturias = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_asturias }
		}
	}
	### Fold Aragon into Valencia
	title:d_aragon = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_valencia = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_valencia }
		}
	}
	title:d_barcelona = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_valencia = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_valencia }
		}
	}
	###	
    add_to_global_variable_list = { name = trade_nodes target = title:k_aquitaine }
    add_to_global_variable_list = { name = trade_nodes target = title:k_burgundy }
    add_to_global_variable_list = { name = trade_nodes target = title:k_brittany }
    add_to_global_variable_list = { name = trade_nodes target = title:k_france }
    add_to_global_variable_list = { name = trade_nodes target = title:k_lotharingia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_frisia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_england  }
    add_to_global_variable_list = { name = trade_nodes target = title:k_wales }
    add_to_global_variable_list = { name = trade_nodes target = title:k_ireland }
    add_to_global_variable_list = { name = trade_nodes target = title:k_scotland }
    add_to_global_variable_list = { name = trade_nodes target = title:k_norway   }
    add_to_global_variable_list = { name = trade_nodes target = title:k_finland }
    add_to_global_variable_list = { name = trade_nodes target = title:k_sapmi }
    add_to_global_variable_list = { name = trade_nodes target = title:k_sweden }
    add_to_global_variable_list = { name = trade_nodes target = title:k_denmark }
    add_to_global_variable_list = { name = trade_nodes target = title:k_esthonia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_lithuania }
    add_to_global_variable_list = { name = trade_nodes target = title:k_pomerania }
    add_to_global_variable_list = { name = trade_nodes target = title:k_east_francia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_poland }
    add_to_global_variable_list = { name = trade_nodes target = title:k_bohemia }
	
	### Fold Lausitz (Sorbia) into East Francia
	title:d_lausitz = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_east_francia = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_east_francia }
			
		}
	}
	
	### Fold Meissen (Sorbia) into East Francia
	title:d_meissen = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_east_francia = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_east_francia }
			
		}
	}
	
	### Fold Moravia into Bohemia
	title:d_moravia = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_bohemia = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_bohemia }
			
		}
	}
	### Fold Nitra into Hungary
	title:d_nyitra = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_hungary = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_hungary }
			
		}
	}
	###
	
    add_to_global_variable_list = { name = trade_nodes target = title:k_bavaria }	
    add_to_global_variable_list = { name = trade_nodes target = title:k_romagna }
    add_to_global_variable_list = { name = trade_nodes target = title:k_italy }
	
    ### Fold Venice into Italy
	title:d_venice = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_italy = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_italy }
			
		}
	}
	###
	
    add_to_global_variable_list = { name = trade_nodes target = title:k_galicia-volhynia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_hungary }
    add_to_global_variable_list = { name = trade_nodes target = title:k_croatia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_serbia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_epirus }
    add_to_global_variable_list = { name = trade_nodes target = title:k_hellas }
    add_to_global_variable_list = { name = trade_nodes target = title:k_cyprus }
    add_to_global_variable_list = { name = trade_nodes target = title:k_krete }
    add_to_global_variable_list = { name = trade_nodes target = title:k_anatolia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_moldavia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_dacia }
    add_to_global_variable_list = { name = trade_nodes target = title:k_bulgaria }
    add_to_global_variable_list = { name = trade_nodes target = title:k_nikaea }

    add_to_global_variable_list = { name = trade_nodes target = title:k_thessalonika }


    title:k_mongolia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_tuva }
        add_to_variable_list = { name = outlet_nodes target = title:k_buryatia }
        add_to_variable_list = { name = outlet_nodes target = title:k_khakassia }
        add_to_variable_list = { name = outlet_nodes target = title:k_angara }
    }
    title:k_tuva = {
        add_to_variable_list = { name = outlet_nodes target = title:k_ob }
    }
    title:k_buryatia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_angara }
    }
    title:k_angara = {
        add_to_variable_list = { name = outlet_nodes target = title:k_ob }
    }
    title:k_khakassia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_ob }
    }
    title:k_ob = {
        add_to_variable_list = { name = outlet_nodes target = title:k_sibir }
        add_to_variable_list = { name = outlet_nodes target = title:k_kipchak }
    }
    title:k_kipchak = {
        add_to_variable_list = { name = outlet_nodes target = title:k_cuman }
    }
    title:k_sibir = {
        add_to_variable_list = { name = outlet_nodes target = title:k_cuman }
        add_to_variable_list = { name = outlet_nodes target = title:k_yugra }
    }
    title:k_yugra = {
        add_to_variable_list = { name = outlet_nodes target = title:k_permia }
    }
    title:k_permia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_volga_bulgaria }
    }
    title:k_bashkiria = {
        add_to_variable_list = { name = outlet_nodes target = title:k_volga_bulgaria }
    }
    title:k_cuman = {
        add_to_variable_list = { name = outlet_nodes target = title:k_oghuz_il }
        add_to_variable_list = { name = outlet_nodes target = title:k_kimek }
        add_to_variable_list = { name = outlet_nodes target = title:k_bashkiria }
    }
    title:k_oghuz_il = {
        add_to_variable_list = { name = outlet_nodes target = title:k_transoxiana }
        add_to_variable_list = { name = outlet_nodes target = title:k_kimek }
    }

    title:k_volga_bulgaria = {
        add_to_variable_list = { name = outlet_nodes target = title:k_caspian_steppe }
        add_to_variable_list = { name = outlet_nodes target = title:k_opolye }
        add_to_variable_list = { name = outlet_nodes target = title:k_mordvinia }
    }
    title:k_kimek = {
        add_to_variable_list = { name = outlet_nodes target = title:k_caspian_steppe }
    }
    title:k_caspian_steppe = {
        add_to_variable_list = { name = outlet_nodes target = title:k_caucasus }
        add_to_variable_list = { name = outlet_nodes target = title:k_pontic_steppe }
    }
    title:k_caucasus = {
        add_to_variable_list = { name = outlet_nodes target = title:k_georgia }
        add_to_variable_list = { name = outlet_nodes target = title:k_pontic_steppe }
    }
    title:k_pontic_steppe = {
        add_to_variable_list = { name = outlet_nodes target = title:k_moldavia }
    }
    title:k_opolye = {
        add_to_variable_list = { name = outlet_nodes target = title:k_bjarmaland }
        add_to_variable_list = { name = outlet_nodes target = title:k_novgorod }
    }
    title:k_mordvinia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_opolye }
        add_to_variable_list = { name = outlet_nodes target = title:k_ruthenia }
    }
    title:k_ruthenia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_white_rus }
        add_to_variable_list = { name = outlet_nodes target = title:k_galicia-volhynia }
    }
    title:k_moldavia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_dacia }
    }
    title:k_dacia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_bulgaria }
    }
    title:k_bulgaria = {
        add_to_variable_list = { name = outlet_nodes target = title:k_thessalonika }
    }
    title:k_bjarmaland = {
        add_to_variable_list = { name = outlet_nodes target = title:k_novgorod }
    }
    title:k_white_rus = {
        add_to_variable_list = { name = outlet_nodes target = title:k_novgorod }
        add_to_variable_list = { name = outlet_nodes target = title:k_lithuania }
    }
    title:k_novgorod = {
        add_to_variable_list = { name = outlet_nodes target = title:k_finland }
        add_to_variable_list = { name = outlet_nodes target = title:k_esthonia }
        add_to_variable_list = { name = outlet_nodes target = title:k_lithuania }
    }
    title:k_finland = {
        add_to_variable_list = { name = outlet_nodes target = title:k_sapmi }
        add_to_variable_list = { name = outlet_nodes target = title:k_sweden }
    }
    title:k_sapmi = {
        add_to_variable_list = { name = outlet_nodes target = title:k_sweden }
    }
    title:k_esthonia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_lithuania }
    }
    title:k_lithuania = {
        add_to_variable_list = { name = outlet_nodes target = title:k_poland }
        add_to_variable_list = { name = outlet_nodes target = title:k_pomerania }
    }
    title:k_pomerania = {
        add_to_variable_list = { name = outlet_nodes target = title:k_east_francia }
        add_to_variable_list = { name = outlet_nodes target = title:k_poland }
    }
    title:k_poland = {
        add_to_variable_list = { name = outlet_nodes target = title:k_bohemia }
    }

    title:k_andalusia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_valencia }
        add_to_variable_list = { name = outlet_nodes target = title:k_badajoz }
    }
    title:k_badajoz = {
        add_to_variable_list = { name = outlet_nodes target = title:k_spanish_galicia }
    }
    title:k_spanish_galicia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_brittany }
        add_to_variable_list = { name = outlet_nodes target = title:k_asturias }
    }
    title:k_asturias = {
        add_to_variable_list = { name = outlet_nodes target = title:k_aquitaine }
    }
    title:k_valencia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_aquitaine }
    }
    title:k_aquitaine = {
        add_to_variable_list = { name = outlet_nodes target = title:k_burgundy }
        add_to_variable_list = { name = outlet_nodes target = title:k_france }
    }
    title:k_burgundy = {
        add_to_variable_list = { name = outlet_nodes target = title:k_france }
        add_to_variable_list = { name = outlet_nodes target = title:k_italy }
    }
    title:k_france = {
        add_to_variable_list = { name = outlet_nodes target = title:k_lotharingia }
        add_to_variable_list = { name = outlet_nodes target = title:k_england }
    }
    title:k_lotharingia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_east_francia }
        add_to_variable_list = { name = outlet_nodes target = title:k_frisia }
    }
    title:k_frisia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_england }
    }
    title:k_brittany = {
        add_to_variable_list = { name = outlet_nodes target = title:k_france }
        add_to_variable_list = { name = outlet_nodes target = title:k_england }
    }
    title:k_england = {
        add_to_variable_list = { name = outlet_nodes target = title:k_wales }
        add_to_variable_list = { name = outlet_nodes target = title:k_norway }
        add_to_variable_list = { name = outlet_nodes target = title:k_scotland }
    }
    title:k_wales = {
        add_to_variable_list = { name = outlet_nodes target = title:k_ireland }
    }
    title:k_ireland = {
        add_to_variable_list = { name = outlet_nodes target = title:k_scotland }
    }
    title:k_scotland = {
        add_to_variable_list = { name = outlet_nodes target = title:k_norway }
    }
    title:k_norway = {
        add_to_variable_list = { name = outlet_nodes target = title:k_denmark }
        add_to_variable_list = { name = outlet_nodes target = title:k_sweden }
    }
    title:k_sweden = {
        add_to_variable_list = { name = outlet_nodes target = title:k_denmark }
    }
    title:k_denmark = {
        add_to_variable_list = { name = outlet_nodes target = title:k_east_francia }
    }
    title:k_bohemia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_bavaria }
        add_to_variable_list = { name = outlet_nodes target = title:k_hungary }
    }
    title:k_east_francia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_bavaria }
        add_to_variable_list = { name = outlet_nodes target = title:k_bohemia}
    }
    title:k_bavaria = {
        add_to_variable_list = { name = outlet_nodes target = title:k_italy }
        add_to_variable_list = { name = outlet_nodes target = title:k_hungary }
        add_to_variable_list = { name = outlet_nodes target = title:k_croatia }
    }
    title:k_italy = {
        add_to_variable_list = { name = outlet_nodes target = title:k_croatia }
    }
    title:k_romagna = {
        add_to_variable_list = { name = outlet_nodes target = title:k_italy }
    }
    title:k_sicily = {
        add_to_variable_list = { name = outlet_nodes target = title:k_romagna }
        add_to_variable_list = { name = outlet_nodes target = title:k_italy }
        add_to_variable_list = { name = outlet_nodes target = title:k_sardinia }
    }
    title:k_sardinia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_valencia }
        add_to_variable_list = { name = outlet_nodes target = title:k_burgundy }
    }
    title:k_galicia-volhynia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_hungary }
    }
    title:k_hungary = {
        add_to_variable_list = { name = outlet_nodes target = title:k_serbia }
        add_to_variable_list = { name = outlet_nodes target = title:k_dacia }
    }
    title:k_croatia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_serbia }
        add_to_variable_list = { name = outlet_nodes target = title:k_epirus }
    }
    title:k_serbia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_epirus }
        add_to_variable_list = { name = outlet_nodes target = title:k_bulgaria }
    }
    title:k_epirus = {
        add_to_variable_list = { name = outlet_nodes target = title:k_hellas }
    }
    title:k_hellas = {
        add_to_variable_list = { name = outlet_nodes target = title:k_krete }
        add_to_variable_list = { name = outlet_nodes target = title:k_thessalonika }
    }
    title:k_krete = {
        add_to_variable_list = { name = outlet_nodes target = title:k_thessalonika }
    }





    title:k_dzungaria = {
        add_to_variable_list = { name = outlet_nodes target = title:k_zhetysu }
        add_to_variable_list = { name = outlet_nodes target = title:k_khotan }
    }
    title:k_zhetysu = {
        add_to_variable_list = { name = outlet_nodes target = title:k_syr_darya }
    }
    title:k_khotan = {
        add_to_variable_list = { name = outlet_nodes target = title:k_transoxiana }
        add_to_variable_list = { name = outlet_nodes target = title:k_maryul }
    }
    title:k_maryul = {
        add_to_variable_list = { name = outlet_nodes target = title:k_kashmir }
    }
    title:k_kashmir = {
        add_to_variable_list = { name = outlet_nodes target = title:k_kabulistan }
    }
    title:k_transoxiana = {
        add_to_variable_list = { name = outlet_nodes target = title:k_kabulistan }
        add_to_variable_list = { name = outlet_nodes target = title:k_khorasan }
    }
    title:k_kabulistan = {
        add_to_variable_list = { name = outlet_nodes target = title:k_khorasan }
    }
    title:k_khorasan = {
        add_to_variable_list = { name = outlet_nodes target = title:k_persia }
        add_to_variable_list = { name = outlet_nodes target = title:k_daylam }
    }
    title:k_persia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_daylam }
        add_to_variable_list = { name = outlet_nodes target = title:k_mesopotamia }
    }
    title:k_mesopotamia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_jazira }
    }
    title:k_jazira = {
        add_to_variable_list = { name = outlet_nodes target = title:k_syria }
    }
    title:k_daylam = {
        add_to_variable_list = { name = outlet_nodes target = title:k_armenia }
        add_to_variable_list = { name = outlet_nodes target = title:k_georgia }
    }
    title:k_armenia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_pontus }
    }
    title:k_georgia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_pontus }
    }
    title:k_pontus = {
        add_to_variable_list = { name = outlet_nodes target = title:k_nikaea }
    }
    title:k_nikaea = {
        add_to_variable_list = { name = outlet_nodes target = title:k_thessalonika }
    }


    title:k_ajuraan = {
        add_to_variable_list = { name = outlet_nodes target = title:k_adal }
        add_to_variable_list = { name = outlet_nodes target = title:k_outer_ajuraan }
    }
    title:k_adal = {
        add_to_variable_list = { name = outlet_nodes target = title:k_yemen }
        add_to_variable_list = { name = outlet_nodes target = title:k_abyssinia }
    }
    title:k_yemen = {
        add_to_variable_list = { name = outlet_nodes target = title:k_arabia }
    }
    title:k_outer_ajuraan = {
        add_to_variable_list = { name = outlet_nodes target = title:k_damot }
    }
    title:k_damot = {
        add_to_variable_list = { name = outlet_nodes target = title:k_abyssinia }
        add_to_variable_list = { name = outlet_nodes target = title:k_alodia }
    }
	title:k_alodia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_darfur }
        add_to_variable_list = { name = outlet_nodes target = title:k_alodia }
    }
    title:k_abyssinia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_blemmyia }
    }
    title:k_nubia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_egypt }
    }
    title:k_blemmyia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_egypt }
    }
    title:k_arabia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_egypt }
        add_to_variable_list = { name = outlet_nodes target = title:k_mesopotamia }
        add_to_variable_list = { name = outlet_nodes target = title:k_syria }
    }
    title:k_egypt = {
        add_to_variable_list = { name = outlet_nodes target = title:k_sicily }
        add_to_variable_list = { name = outlet_nodes target = title:k_nubia }
        add_to_variable_list = { name = outlet_nodes target = title:k_africa }
    }
	### Fold Jerusalem into Syria
	title:k_jerusalem = {
        every_in_de_jure_hierarchy = {
            limit = { tier = tier_county }
            title:k_syria = { add_to_variable_list = { name = node_counties target = prev } }
			set_variable = { name = trade_node value = title:k_syria }
			
		}
	}
	###
    title:k_jerusalem = {
        add_to_variable_list = { name = outlet_nodes target = title:k_egypt }
    }
    title:k_syria = {
        add_to_variable_list = { name = outlet_nodes target = title:k_anatolia }
        add_to_variable_list = { name = outlet_nodes target = title:k_cyprus }
        add_to_variable_list = { name = outlet_nodes target = title:k_egypt }
    }
    title:k_cyprus = {
        add_to_variable_list = { name = outlet_nodes target = title:k_krete }
    }
    title:k_anatolia = {
        add_to_variable_list = { name = outlet_nodes target = title:k_nikaea }
    }

    title:k_darfur = {
        add_to_variable_list = { name = outlet_nodes target = title:k_sao }
    }
    title:k_sahara = {
        add_to_variable_list = { name = outlet_nodes target = title:k_anbiya }
        add_to_variable_list = { name = outlet_nodes target = title:k_africa }
    }
    title:k_africa = {
        add_to_variable_list = { name = outlet_nodes target = title:k_tahert }
    }
    title:k_anbiya = {
        add_to_variable_list = { name = outlet_nodes target = title:k_tahert }
        add_to_variable_list = { name = outlet_nodes target = title:k_maghreb }
    }
    title:k_tahert = {
        add_to_variable_list = { name = outlet_nodes target = title:k_maghreb }
    }
    title:k_sao = {
        add_to_variable_list = { name = outlet_nodes target = title:k_kanem }
		add_to_variable_list = { name = outlet_nodes target = title:k_kwararafa }
    }
    title:k_kanem = {
        add_to_variable_list = { name = outlet_nodes target = title:k_sahara }
        add_to_variable_list = { name = outlet_nodes target = title:k_hausaland }
        add_to_variable_list = { name = outlet_nodes target = title:k_kwararafa }
    }
    title:k_hausaland = {
        add_to_variable_list = { name = outlet_nodes target = title:k_songhay }
        add_to_variable_list = { name = outlet_nodes target = title:k_borgu}
    }
	title:k_kwararafa = {
		add_to_variable_list = { name = outlet_nodes target = title:k_igbo-benue }
	}
    title:k_igbo-benue = {
		add_to_variable_list = { name = outlet_nodes target = title:k_benin }
    }
	title:k_benin = {
        add_to_variable_list = { name = outlet_nodes target = title:k_yorubaland }
    }
    title:k_yorubaland = {
        add_to_variable_list = { name = outlet_nodes target = title:k_borgu }
        add_to_variable_list = { name = outlet_nodes target = title:k_akan }
    }
    title:k_borgu = {
        add_to_variable_list = { name = outlet_nodes target = title:k_gur }
        add_to_variable_list = { name = outlet_nodes target = title:k_akan}
    }
    title:k_akan  = {
        add_to_variable_list = { name = outlet_nodes target = title:k_kong }
        add_to_variable_list = { name = outlet_nodes target = title:k_adiukru }
    }
    title:k_songhay = {
        add_to_variable_list = { name = outlet_nodes target = title:k_ghana }
        add_to_variable_list = { name = outlet_nodes target = title:k_gurma }
    }
    title:k_gur = {
        add_to_variable_list = { name = outlet_nodes target = title:k_kong }
    }
    title:k_gurma = {
        add_to_variable_list = { name = outlet_nodes target = title:k_jenne }
    }
    title:k_jenne = {
        add_to_variable_list = { name = outlet_nodes target = title:k_mali }
    }
    title:k_kong  = {
        add_to_variable_list = { name = outlet_nodes target = title:k_mali }
    }
    title:k_adiukru = {
        add_to_variable_list = { name = outlet_nodes target = title:k_guinea }
    }
    title:k_guinea = {
        add_to_variable_list = { name = outlet_nodes target = title:k_mali }
    }
    title:k_mali  = {
        add_to_variable_list = { name = outlet_nodes target = title:k_kaabu }
        add_to_variable_list = { name = outlet_nodes target = title:k_ghana }
    }
    title:k_kaabu = {
        add_to_variable_list = { name = outlet_nodes target = title:k_takrur }
    }
    title:k_takrur = {
        add_to_variable_list = { name = outlet_nodes target = title:k_maghreb }
    }
    title:k_ghana = {
        add_to_variable_list = { name = outlet_nodes target = title:k_anbiya }
        add_to_variable_list = { name = outlet_nodes target = title:k_takrur }
    }
    title:k_maghreb = {
        add_to_variable_list = { name = outlet_nodes target = title:k_andalusia }
    }


    title:k_xia = {  ## China node
        add_to_variable_list = { name = outlet_nodes target = title:k_khotan }
        add_to_variable_list = { name = outlet_nodes target = title:k_amdo }
        add_to_variable_list = { name = outlet_nodes target = title:k_gyalrong }
    }
    title:k_gyalrong = {
        add_to_variable_list = { name = outlet_nodes target = title:k_kham }
    }
    title:k_kham = {
        add_to_variable_list = { name = outlet_nodes target = title:k_u }
        add_to_variable_list = { name = outlet_nodes target = title:k_kamarupa }
    }
    title:k_u = {
        add_to_variable_list = { name = outlet_nodes target = title:k_tsang }
        add_to_variable_list = { name = outlet_nodes target = title:k_guge }
    }
    title:k_guge = {
        add_to_variable_list = { name = outlet_nodes target = title:k_delhi }
    }
    title:k_tsang = {
        add_to_variable_list = { name = outlet_nodes target = title:k_guge }
        add_to_variable_list = { name = outlet_nodes target = title:k_himalaya }
    }
    title:k_amdo = {
        add_to_variable_list = { name = outlet_nodes target = title:k_u }
    }
    title:k_kamarupa = {
        add_to_variable_list = { name = outlet_nodes target = title:k_bengal }
    }
    title:k_pagan = {
        add_to_variable_list = { name = outlet_nodes target = title:k_bengal }
    }
    title:k_bengal = {
        add_to_variable_list = { name = outlet_nodes target = title:k_tamilakam }
        add_to_variable_list = { name = outlet_nodes target = title:k_orissa }
        add_to_variable_list = { name = outlet_nodes target = title:k_lanka }
    }
    title:k_lanka = {
        add_to_variable_list = { name = outlet_nodes target = title:k_tamilakam }
    }
    title:k_bihar = {
        add_to_variable_list = { name = outlet_nodes target = title:k_kosala }
    }
    title:k_himalaya = {
        add_to_variable_list = { name = outlet_nodes target = title:k_delhi }
    }
    title:k_kosala = {
        add_to_variable_list = { name = outlet_nodes target = title:k_delhi }
    }
    title:k_delhi = {
        add_to_variable_list = { name = outlet_nodes target = title:k_punjab }
    }

    title:k_orissa = {
        add_to_variable_list = { name = outlet_nodes target = title:k_gondwana }
        add_to_variable_list = { name = outlet_nodes target = title:k_andhra }
        add_to_variable_list = { name = outlet_nodes target = title:k_telingana }
    }
    title:k_andhra = {
        add_to_variable_list = { name = outlet_nodes target = title:k_tamilakam }
    }
    title:k_tamilakam = {
        add_to_variable_list = { name = outlet_nodes target = title:k_karnata }
        add_to_variable_list = { name = outlet_nodes target = title:k_ajuraan }
        add_to_variable_list = { name = outlet_nodes target = title:k_yemen }
    }
    title:k_telingana = {
        add_to_variable_list = { name = outlet_nodes target = title:k_maharastra }
    }
    title:k_karnata = {
        add_to_variable_list = { name = outlet_nodes target = title:k_maharastra }
    }
    title:k_maharastra = {
        add_to_variable_list = { name = outlet_nodes target = title:k_malwa }
        add_to_variable_list = { name = outlet_nodes target = title:k_gujarat }
    }
    title:k_malwa = {
        add_to_variable_list = { name = outlet_nodes target = title:k_rajputana }
        add_to_variable_list = { name = outlet_nodes target = title:k_gujarat }
    }
    title:k_gujarat = {
        add_to_variable_list = { name = outlet_nodes target = title:k_arabia }
        add_to_variable_list = { name = outlet_nodes target = title:k_yemen }
    }
    title:k_rajputana = {
        add_to_variable_list = { name = outlet_nodes target = title:k_punjab }
    }
    title:k_gondwana = {
        add_to_variable_list = { name = outlet_nodes target = title:k_malwa }
        add_to_variable_list = { name = outlet_nodes target = title:k_kosala }
    }
    title:k_punjab = {
        add_to_variable_list = { name = outlet_nodes target = title:k_sindh }
        add_to_variable_list = { name = outlet_nodes target = title:k_kabulistan }
    }
    title:k_sindh = {
        add_to_variable_list = { name = outlet_nodes target = title:k_makran }
        add_to_variable_list = { name = outlet_nodes target = title:k_gujarat }
    }
    title:k_makran = {
        add_to_variable_list = { name = outlet_nodes target = title:k_persia }
    }
}

#############################################################################

demd_set_off_map_trade_bonuses = {
	title:k_xia = { set_variable = { name = off_map_collected_trade_value value = 100 } }
    title:k_mongolia = { set_variable = { name = off_map_collected_trade_value value = 100 } }
    title:k_dzungaria = { set_variable = { name = off_map_collected_trade_value value = 350 } } ## Urumpki, primary silk road trading city 
    title:k_gyalrong = { set_variable = { name = off_map_collected_trade_value value = 100 } } ## Tibetan Silk road route
    title:k_pagan = { set_variable = { name = off_map_collected_trade_value value = 200 } } ## Trade into India
    title:k_tamilakam = { set_variable = { name = off_map_collected_trade_value value = 100 } }
    title:k_ajuraan = { set_variable = { name = off_map_collected_trade_value value = 30 } } ## Trade from West African coast (Zanzibar, etc)
    title:k_igbo-benue = { set_variable = { name = off_map_collected_trade_value value = 20 } } ## Trade from central Africa
}

#############################################################################

demd_set_culture_super_groups = {
 
}

#############################################################################

demd_manual_pop_placements = {
	demd_fill_with_holdings = { TITLE = e_deccan PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = e_bengal PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = e_rajastan PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = k_mesopotamia PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = k_jazira PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = k_jerusalem PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = k_syria PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = k_daylam PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = k_egypt PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = k_nikaea PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = d_rayy PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = d_tunis PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = e_france PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = e_spain PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = e_germany PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = e_italy PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = e_byzantium PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = e_hre PERCENT = 100 }
	demd_fill_with_holdings = { TITLE = k_england PERCENT = 100 }
	
	## Obviously need different versions for 867...
	# temporarily deleted
	
}

demd_fill_with_holdings = {
	title:$TITLE$ = {
		every_in_de_jure_hierarchy = {
			limit = { tier = tier_county }
			every_county_province = {
				limit = { 
					NOR = { 
						county.title_province = this 
						county.title_province = { has_holding_type = tribal_holding }
						has_holding = yes
					}					
				}
				random_list = {
					0 = {
						modifier = {
							always = yes
							add = $PERCENT$
						}
						demd_build_minor_holding = yes
					}
					100 = {
						modifier = {
							always = yes
							add = -$PERCENT$
						}
						# do nothing
					}
				}
				
			}
		}
	}
}
